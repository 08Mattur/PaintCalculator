@model PaintCalculator.UI.Models.HomeViewModel

@{
    ViewBag.Title = "Form";
}

<div class="content-area">
    @using (Html.BeginForm("Index", "Home"))
    {
        <div class="card">
            <div class="card-header bg-light">
                <h3>
                    Paint Calculator
                </h3>
            </div>
            <div class="card-body">
                <h4>
                    Room Details
                </h4>
                <div class="form-group row">
                    <div class="col-12 col-md-2 mt-3">
                        Width (m)
                    </div>
                    <div class="col-12 col-md-2 mt-0 mt-md-3">
                        @Html.TextBoxFor(x => x.Room.Width, new { @class = "form-control", @placeholder = "Width..." })
                        @Html.ValidationMessageFor(x => x.Room.Width, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-12 col-md-2 mt-3">
                        Length (m)
                    </div>
                    <div class="col-12 col-md-2 mt-0 mt-md-3">
                        @Html.TextBoxFor(x => x.Room.Length, new { @class = "form-control", @placeholder = "Length..." })
                        @Html.ValidationMessageFor(x => x.Room.Length, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-12 col-md-2 mt-3">
                        Height (m)
                    </div>
                    <div class="col-12 col-md-2 mt-0 mt-md-3">
                        @Html.TextBoxFor(x => x.Room.Height, new { @class = "form-control", @placeholder = "Height..." })
                        @Html.ValidationMessageFor(x => x.Room.Height, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="row">
                    <div class="col-12 col-md-6 p-4">
                        <h5 class="mt-3">
                            Doors
                        </h5>
                        <div class="row" style="border-bottom: solid 1px silver">
                            <div class="col-5">
                                Height (m)
                            </div>
                            <div class="col-5">
                                Width (m)
                            </div>
                            <div class="col-2">

                            </div>
                        </div>
                        <div id="divDoorList">
                            @foreach (var item in Model.Room.Doors)
                            {
                                @Html.Partial("_Door", item)
                            }
                        </div>
                        <div class="row mt-2">
                            <div class="col-12 text-right">
                                <button id="btnAddDoor" name="btnAddDoor" class="btn btn-primary btn-sm">
                                    <i class="fa fa-plus"></i>
                                </button>
                            </div>
                        </div>

                    </div>
                    <div class="col-12 col-md-6 p-4">
                        <h5 class="mt-3">
                            Windows
                        </h5>
                        <div class="row" style="border-bottom: solid 1px silver">
                            <div class="col-5">
                                Height (m)
                            </div>
                            <div class="col-5">
                                Width (m)
                            </div>
                            <div class="col-2">

                            </div>
                        </div>
                        <div id="divWindowList">
                            @foreach (var item in Model.Room.Windows)
                            {
                                @Html.Partial("_Window", item)
                            }
                        </div>
                        <div class="row mt-2">
                            <div class="col-12 text-right">
                                <button id="btnAddWindow" name="btnAddWindow" class="btn btn-primary btn-sm">
                                    <i class="fa fa-plus"></i>
                                </button>
                            </div>
                        </div>

                    </div>
                </div>





                <h4 class="mt-3">
                    Paint Details
                </h4>
                <div class="form-group row">
                    <div class="col-12 col-md-2 mt-3">
                        M²/L
                    </div>
                    <div class="col-12 col-md-2 mt-0 mt-md-3">
                        @Html.TextBoxFor(x => x.Paint.MLNumber, new { @class = "form-control", @placeholder = "M²/L Number..." })
                        @Html.ValidationMessageFor(x => x.Paint.MLNumber, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-12 col-md-2 mt-3">
                        Capacity (L)
                    </div>
                    <div class="col-12 col-md-2 mt-0 mt-md-3">
                        @Html.TextBoxFor(x => x.Paint.Capacity, new { @class = "form-control", @placeholder = "Capacity..." })
                        @Html.ValidationMessageFor(x => x.Paint.Capacity, "", new { @class = "text-danger" })
                    </div>
                    <div class="col-12 col-md-2 mt-3">
                        Coats
                    </div>
                    <div class="col-12 col-md-2 mt-0 mt-md-3">
                        @Html.TextBoxFor(x => x.Coats, new { @class = "form-control", @placeholder = "Coats..." })
                        @Html.ValidationMessageFor(x => x.Coats, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="text-center">
                    <button type="submit" class="btn btn-primary" id="btnCalculate">
                        Calculate
                    </button>
                </div>


                @{
                    if (ViewData.ModelState.IsValid)
                    {
                        <h4 class="mt-5">
                            Summary
                        </h4>
                        <div class="row">
                            <div class="col-2">
                                Floor Area(m²)
                            </div>
                            <div class="col-2">
                                @Html.Label("lblFloorArea", Model.Room.FloorArea.ToString(), "")
                            </div>
                            <div class="col-2">
                                Wall Area(m²)
                            </div>
                            <div class="col-2">
                                @Html.Label("lblWallArea", Model.Room.WallArea.ToString(), "")
                            </div>
                            <div class="col-2">
                                Room Volume(m³)
                            </div>
                            <div class="col-2">
                                @Html.Label("lblRoomVolume", Model.Room.Volume.ToString(), "")
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-2">
                                Paint Required(L)
                            </div>
                            <div class="col-2">
                                @Html.Label("lblPaintRequired", Model.PaintRequired.ToString(), "")
                            </div>
                            <div class="col-2">
                                Tins Required
                            </div>
                            <div class="col-2">
                                @Html.Label("lblTinsRequired", Model.TinsRequired.ToString(), "")
                            </div>
                        </div>
                    }
                }

            </div>
        </div>
    }
</div>



@section scripts
    {
    <script>
        $(document).ready(function () {
            $('#btnAddDoor').on('click', function () {
                $.ajax({
                    url: '@Url.Action("Door")',
                    cache: false,
                    success: function (html) { $("#divDoorList").append(html); }
                });
                return false;
            })
            $('#divDoorList').on('click', '.deleteDoor', function () {
                $(this).closest('.doorRow').remove();
            });

            $('#btnAddWindow').on('click', function () {
                $.ajax({
                    url: '@Url.Action("Window")',
                    cache: false,
                    success: function (html) { $("#divWindowList").append(html); }
                });
                return false;
            })
            $('#divWindowList').on('click', '.deleteWindow', function () {
                $(this).closest('.windowRow').remove();
            });
        });


    </script>
}
